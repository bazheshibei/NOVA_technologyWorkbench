webpackJsonp([1],{"/LZa":function(t,e){},"0HPH":function(t,e){},"4OFl":function(t,e){},"7m88":function(t,e){},"9mef":function(t,e){},AVLq:function(t,e){},K61J:function(t,e){},NHJM:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("keep-alive",[e("router-view")],1)],1)},staticRenderFns:[]};var s=i("VU/8")({name:"App"},a,!1,function(t){i("K61J")},null,null).exports,o=i("/ocq"),r=i("mtWM"),l=i.n(r),c=i("mw3O"),d=i.n(c),_=i("zL8q"),u=i.n(_);l.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",l.a.interceptors.request.use(function(t){return t});var p=function(t){var e=void 0,i=t.path,n=void 0===i?"":i,a=t.path2,s=void 0===a?"":a,o=t.obj,r=void 0===o?{}:o,c=t.suc,u=void 0===c?function(t){}:c,p=t.err,m=void 0===p?function(t){}:p,h=t.method,v=void 0===h?"get":h,g=t.loading,f=void 0===g?"":g,b=r,w=n+s;if("get"===v){var C=[];for(var y in b)C.push(y+"="+b[y]);w+=C.length?w.indexOf("?")>-1?"&"+C.join("&"):"?"+C.join("&"):""}f&&(e=_.Loading.service({text:f})),l()({method:v,url:w,data:d.a.stringify(b)}).then(function(t){u(t.data.data)}).catch(function(t){m(t),f&&e.close()})},m=window.location.origin+"/nova/",h={"工作台任务列表":"taskBusinessDetailAction.ndo?action=detailList","修改状态":"taskBusinessDetailAction.ndo?action=updateLevel","权限":"unitConsumptionAccountShowAction.ndo?action=getWorkbenchResources","待办已办业务列表":"itemInfoAction.ndo?action=needToBeDealtWithNode","消息中心":"msgInfoShowAction.ndo?action=getMsgList","技术单耗岗":"unitConsumptionAccountShowAction.ndo?action=getUnitConsumPtion","核算前验证":"unitConsumptionAccountShowAction.ndo?action=materialIsAudit","核算单耗":"unitConsumptionAccountShowAction.ndo?action=showAdd","技术工艺岗":"styleCraftShowAction.ndo?action=getStyleCraftList","查看工艺单":"styleCraftShowAction.do?action=showAdd","技术版型岗":"sampleConfirmRecordShowAction.ndo?action=getSampleConfirmRecordList","日程列表":"SchedulerAction.ndo?action=querySchedule"},v=function(t){t.path=m+h[t.name],p(t)},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"whiteBox"},[i("div",{staticClass:"whiteBoxTitle"},[i("span",{staticClass:"titleText"},[t._v("\n      "+t._s(t.title)+"\n      "),t._t("f5")],2),t._v(" "),t._t("title"),t._v(" "),t.hidden?i("div",{staticClass:"hidden"},[i("p",{directives:[{name:"show",rawName:"v-show",value:t.showHidden,expression:"showHidden"}],on:{click:function(e){t.showHidden=!t.showHidden}}},[i("i",{staticClass:"el-icon-arrow-up"}),t._v(" "),i("span",[t._v("收起")])]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:!t.showHidden,expression:"!showHidden"}],on:{click:function(e){t.showHidden=!t.showHidden}}},[i("i",{staticClass:"el-icon-arrow-down"}),t._v(" "),i("span",[t._v("展开")])])]):t._e()],2),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.showHidden,expression:"showHidden"}],staticClass:"whiteBoxContent"},[t._t("default")],2)])},staticRenderFns:[]};var f=i("VU/8")({props:["title","hidden"],data:function(){return{showHidden:!0}}},g,!1,function(t){i("uTUo")},"data-v-345f68c0",null).exports,b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tobTabBox"},[i("el-radio-group",{staticClass:"topTab",attrs:{size:"small"},on:{change:t.change},model:{value:t.active2,callback:function(e){t.active2=e},expression:"active2"}},t._l(t.list,function(e,n){return i("el-radio-button",{key:"list_"+n,attrs:{size:"mini",label:n}},[i("span",[t._v(t._s(n))]),t._v(" "),i("span",{staticClass:"point",class:t.active2===n?"active":"none"},[t._v(t._s(e))])])})),t._v(" "),t._t("otherBtn")],2)},staticRenderFns:[]};var w=i("VU/8")({props:["list","active"],data:function(){return{active2:""}},created:function(){this.active&&(this.active2=this.active)},watch:{active:function(t,e){this.active2=t}},methods:{change:function(t){this.$emit("changeTab",t)}}},b,!1,function(t){i("0HPH"),i("9mef")},"data-v-7598f85c",null).exports,C={components:{ComWhiteBox:f,ComTopTab:w},data:function(){return{loading:!1,ids:"",ids_index:[],tabs:{"预警":0,"今日待办":0,"公共任务":0,"全部":0},pageObj:{"预警":{count:0,size:5,page:1},"今日待办":{count:0,size:5,page:1},"公共任务":{count:0,size:5,page:1},"全部":{count:0,size:5,page:1}},curr_status_obj:{0:{name:"未发布",color:"#F56C6C"},1:{name:"正常进行",color:"#67C23A"},2:{name:"延期进行",color:"#67C23A"},3:{name:"按期完成",color:"#909399"},4:{name:"延期完成",color:"#909399"},5:{name:"已取消",color:"#909399"}},backgroundColor:{1:"#409EFF",2:"#67C23A",3:"#F56C6C",4:"#E6A23C",5:"#909399"},listObj:{"预警":[],"今日待办":[],"公共任务":[],"全部":[]},active:"预警",tabType:{"预警":"1","今日待办":"2","公共任务":"4","全部":""}}},created:function(){var t=this.tabs;for(var e in t)this.A_detailList(e)},methods:{A_showAdd_0:function(){var t=window.location.origin+"/nova/";ui("open",{title:"查看更多",url:t+"pages/taskbusinesssummary/taskBusinessDetaillist_todo.jsp",onClose:function(){}})},goComplete:function(t){var e=t.curr_status;if(Number(e)<3||Number(e)>4){var i=this,n=t.url,a=t.task_detail_id,s=window.location.origin+"/nova",o=-1!==n.indexOf("?")?"&task_detail_id="+a:"?task_detail_id="+a;updateWin({url:s+n+o,param:{},width:1600,height:7e3,title:"业务完成",fn:function(){i.f5(!1)},onClose:function(){i.f5(!1)}})}},goTo:function(t){var e=this,i=window.location.origin+"/nova/",n=t.task_detail_id;updateWin({url:i+"taskBusinessProgressShowAction.ndo?action=showAdd",param:{taskid:n,empid:"965BAD8F4EF5C14CE4F607E77D30B9B5"},width:1600,height:7e3,title:"录入任务进展",fn:function(){e.f5(!1)},onClose:function(){}})},A_detailList:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading=e;var i=this,n=this.tabType,a=this.pageObj,s=parseInt(a[t].page)-1,o=a[t].size,r={type:n[t],emp_id:"",page:s,num:o};v({name:"工作台任务列表",obj:r,suc:function(n){if(e&&(i.loading=!1),n.data.length){i.tabs[t]=parseInt(n.nums);var r={count:parseInt(n.nums),size:parseInt(o),page:s+1};i.pageObj[t]=r;for(var l=0;l<n.data.length;l++)n.data[l].index=l;i.listObj[t]=n.data||[]}else{var c=parseInt(a[t].page);c>1&&(i.pageObj[t].page=c-1,i.A_detailList(t,!0))}},method:"post"})},changeTab:function(t){this.active=t},handleSelectionChange:function(){var t=[],e=[];(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(i){i.task_detail_id&&(t.push(i.task_detail_id),e.push(i.index))}),this.ids=t.join(","),this.ids_index=e},setColor:function(t){var e=this,i=this.ids;v({name:"修改状态",obj:{type:t,ids:i},suc:function(t){e.f5(!1)}})},handleSizeChange:function(t){var e=this.pageObj,i=this.active;e[i].size=t,e[i].page=1,this.A_detailList(i,!0)},handleCurrentChange:function(t){var e=this.pageObj,i=this.active;e[i].page=t,this.A_detailList(i,!0)},cellStyle:function(t){var e=t.row;t.column,t.rowIndex;if(1===t.columnIndex)return{background:this.backgroundColor[e.emergency_level],color:e.emergency_level?"#ffffff":"",fontWeight:e.emergency_level?"bold":""}},f5:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.pageObj,i=this.listObj,n=this.tabs;if(t){for(var a in e)e[a]={count:0,size:5,page:1};for(var s in i)i[s]=[];this.pageObj=e,this.listObj=i,this.active="预警"}for(var o in n)this.A_detailList(o,!0)}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("com-white-box",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"任务中心"}},[i("template",{slot:"f5"},[i("i",{staticClass:"el-icon-refresh f5",on:{click:t.f5}})]),t._v(" "),i("template",{slot:"title"},[i("span",{staticStyle:{cursor:"pointer","font-size":"12px"},on:{click:t.A_showAdd_0}},[t._v("\n      点击查看更多\n      "),i("i",{staticClass:"el-icon-right"})])]),t._v(" "),i("com-top-tab",{attrs:{active:t.active,list:t.tabs},on:{changeTab:t.changeTab}},[i("template",{slot:"otherBtn"},[i("el-dropdown",{attrs:{size:"mini","split-button":"",type:"primary",trigger:"click"},on:{command:t.setColor}},[t._v("\n        标签设置为\n        "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{style:{background:t.backgroundColor[5]},attrs:{command:"5",disabled:!t.ids.length}},[t._v("\n            暂缓\n          ")]),t._v(" "),i("el-dropdown-item",{style:{background:t.backgroundColor[1]},attrs:{command:"1",disabled:!t.ids.length}},[t._v("\n            不紧急不重要\n          ")]),t._v(" "),i("el-dropdown-item",{style:{background:t.backgroundColor[2]},attrs:{command:"2",disabled:!t.ids.length}},[t._v("\n            重要不紧急\n          ")]),t._v(" "),i("el-dropdown-item",{style:{background:t.backgroundColor[4]},attrs:{command:"4",disabled:!t.ids.length}},[t._v("\n            紧急不重要\n          ")]),t._v(" "),i("el-dropdown-item",{style:{background:t.backgroundColor[3]},attrs:{command:"3",disabled:!t.ids.length}},[t._v("\n            重要紧急\n          ")])],1)],1)],1)],2),t._v(" "),i("el-table",{staticClass:"newsTable",attrs:{data:t.listObj[t.active],border:"","cell-style":t.cellStyle},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",align:"center",width:"25"}}),t._v(" "),i("el-table-column",{attrs:{label:"任务内容",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"hover",on:{click:function(i){t.goComplete(e.row)}}},[t._v(t._s(e.row.task_content))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"要求完成日期",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.expect_finish_date))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"预计完成日期",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.plan_finish_date))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"发送人",width:"60",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(e.row.task_initiator_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"状态",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{style:{color:t.curr_status_obj[e.row.curr_status].color}},[t._v("\n          "+t._s(t.curr_status_obj[e.row.curr_status].name)+"\n        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"50",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"hover click",on:{click:function(i){t.goTo(e.row)}}},[t._v("跟进")])]}}])})],1),t._v(" "),i("div",{staticClass:"paginationBox"},[i("el-pagination",{staticClass:"comPagination",attrs:{"page-size":t.pageObj[t.active].size,"page-sizes":[5,10,20,30],total:t.pageObj[t.active].count,"current-page":t.pageObj[t.active].page,layout:"prev, pager, next, total, jumper, sizes","prev-text":"上一页","next-text":"下一页","pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2)},staticRenderFns:[]};var x=i("VU/8")(C,y,!1,function(t){i("AVLq"),i("X99F")},"data-v-23fa805e",null).exports,A=i("mvHQ"),k=i.n(A),j={components:{ComWhiteBox:f,ComTopTab:w},data:function(){return{loading:!1,tabs:{"全部":0,"今日消息":0,"待阅读":0},pageObj:{"全部":{count:0,size:5,page:1},"今日消息":{count:0,size:5,page:1},"待阅读":{count:0,size:5,page:1}},listObj:{"全部":[],"今日消息":[],"待阅读":[]},search:{"全部":{msg_content:"",sendor:"",read_sign:""},"今日消息":{msg_content:"",sendor:"",read_sign:""},"待阅读":{msg_content:"",sendor:"",read_sign:""}},active:"全部",tabType:{"全部":1,"今日消息":2,"待阅读":3},text:{read_sign:{0:"未读",1:"已读"},read_sign_color:{0:"#F56C6C",1:"#909399"},api_read_sign:{"未读":0,"已读":1}}}},created:function(){var t=this.tabs;for(var e in t)this.A_getMsgList(e)},methods:{A_showAdd_0:function(){var t=window.location.origin+"/nova/";ui("open",{title:"查看更多",url:t+"pages/msginfo/msgInfolist.jsp",onClose:function(){}})},A_showAdd_1:function(t){var e=this,i=window.location.origin+"/nova/",n=e.listObj,a=e.active,s=n[a][t].msg_id;updateWin({url:i+"msgReplyShowAction.do?action=showAdd",param:{id:s},width:1100,height:550,title:"回复消息",fn:function(){e.A_getMsgList(a,!0),"待阅读"!==a&&e.A_getMsgList("待阅读",!0)},onClose:function(){e.A_getMsgList(a,!0),"待阅读"!==a&&e.A_getMsgList("待阅读",!0)}})},A_showAdd_2:function(t){var e=window.location.origin+"/nova/",i=this.listObj[this.active][t].msg_id;win({url:e+"msgInfoShowAction.do?action=showView",param:{id:i},width:1100,height:550,title:"查看回复",fn:function(){}})},tableHeaderClick:function(t){var e=this;setTimeout(function(){e.$refs[t].focus()},100)},dblclick:function(t){var e=this,i=window.location.origin+"/nova/",n=e.listObj,a=e.active,s=n[a][t].msg_id;win({url:i+"msgInfoShowAction.do?action=showView",param:{id:s},width:1100,height:550,title:"查看消息",onClose:function(){e.A_getMsgList(a,!0),"待阅读"!==a&&e.A_getMsgList("待阅读",!0)}})},A_getMsgList:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading=e;var i=this,n=this.tabType,a=this.search,s=this.text,o=this.pageObj,r={};for(var l in a[t]){var c=a[t][l].trim();c&&("read_sign"===l&&(s.api_read_sign[c]||0===s.api_read_sign[c])?r[l]=s.api_read_sign[c]:r[l]=c)}var d=parseInt(o[t].page)-1,_=o[t].size,u={type:n[t],emp_id:"",condition:encodeURI(k()(r)),start:d,page:_};v({name:"消息中心",obj:u,suc:function(n){if(e&&(i.loading=!1),n.data.length){i.tabs[t]=parseInt(n.count.num);var a={count:parseInt(n.count.num),size:parseInt(n.page),page:parseInt(n.start)+1};i.pageObj[t]=a;for(var s=0;s<n.data.length;s++)n.data[s].index=s;i.listObj[t]=n.data||[]}else{var r=parseInt(o[t].page);r>1&&(i.pageObj[t].page=r-1,i.A_getMsgList(t,!0))}}})},changeTab:function(t){this.active=t},clear:function(t){var e=this.active;this.search[e][t]=""},select:function(){var t=this.pageObj,e=this.active;t[e].page=1,this.A_getMsgList(e,!0)},handleClick:function(t){},handleSizeChange:function(t){var e=this.pageObj,i=this.active;e[i].size=t,e[i].page=1,this.A_getMsgList(i,!0)},handleCurrentChange:function(t){var e=this.pageObj,i=this.active;e[i].page=t,this.A_getMsgList(i,!0)},f5:function(){var t=this.pageObj,e=this.listObj,i=this.search,n=this.tabs;for(var a in t)t[a]={count:0,size:5,page:1};for(var s in e)e[s]=[];for(var o in i)i[o]={msg_content:"",sendor:"",read_sign:""};for(var r in this.pageObj=t,this.listObj=e,this.search=i,this.active="全部",n)this.A_getMsgList(r,!0)},todayTime:function(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+t.getDate()+" 00:00:00"}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("com-white-box",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"消息中心"}},[i("template",{slot:"f5"},[i("i",{staticClass:"el-icon-refresh f5",on:{click:t.f5}})]),t._v(" "),i("template",{slot:"title"},[i("span",{staticStyle:{cursor:"pointer","font-size":"12px"},on:{click:t.A_showAdd_0}},[t._v("\n      点击查看更多\n      "),i("i",{staticClass:"el-icon-right"})])]),t._v(" "),i("com-top-tab",{attrs:{active:t.active,list:t.tabs},on:{changeTab:t.changeTab}}),t._v(" "),i("el-table",{staticClass:"newsTable",attrs:{data:t.listObj[t.active],border:""}},[i("el-table-column",{scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[i("el-input",{ref:"input_1",attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(e){t.clear("msg_content")},change:t.select},model:{value:t.search[t.active].msg_content,callback:function(e){t.$set(t.search[t.active],"msg_content",e)},expression:"search[active].msg_content"}}),t._v(" "),i("div",{staticClass:"thText",class:t.search[t.active].msg_content?"thActive":"",staticStyle:{flex:"1"},attrs:{slot:"reference"},on:{click:function(e){t.tableHeaderClick("input_1")}},slot:"reference"},[t._v("\n            消息内容"),i("span",[t._v(" "),i("i",{staticClass:"el-icon-search"})])])],1)]}},{key:"default",fn:function(e){return[i("p",{on:{dblclick:function(i){t.dblclick(e.row.index)}}},[t._v(t._s(e.row.msg_content))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"80",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[i("el-input",{ref:"input_2",attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(e){t.clear("sendor")},change:t.select},model:{value:t.search[t.active].sendor,callback:function(e){t.$set(t.search[t.active],"sendor",e)},expression:"search[active].sendor"}}),t._v(" "),i("div",{staticClass:"thText",class:t.search[t.active].sendor?"thActive":"",staticStyle:{flex:"1"},attrs:{slot:"reference"},on:{click:function(e){t.tableHeaderClick("input_2")}},slot:"reference"},[t._v("\n            发送人"),i("span",[t._v(" "),i("i",{staticClass:"el-icon-search"})])])],1)]}},{key:"default",fn:function(e){return[i("p",[t._v(t._s(e.row.sendor))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"发送时间",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(e.row.send_time.split(" ")[0]))]),t._v(" "),i("p",[t._v(t._s(e.row.send_time.split(" ")[1]))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"90",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[i("el-input",{ref:"input_3",attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(e){t.clear("read_sign")},change:t.select},model:{value:t.search[t.active].read_sign,callback:function(e){t.$set(t.search[t.active],"read_sign",e)},expression:"search[active].read_sign"}}),t._v(" "),i("div",{staticClass:"thText",class:t.search[t.active].read_sign?"thActive":"",staticStyle:{flex:"1"},attrs:{slot:"reference"},on:{click:function(e){t.tableHeaderClick("input_3")}},slot:"reference"},[t._v("\n            阅读标记"),i("span",[t._v(" "),i("i",{staticClass:"el-icon-search"})])])],1)]}},{key:"default",fn:function(e){return[i("p",{style:{color:t.text.read_sign_color[e.row.read_sign]}},[t._v("\n          "+t._s(t.text.read_sign[e.row.read_sign])+"\n        ")])]}}])}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"操作",width:"70",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("div",{staticClass:"thText",staticStyle:{flex:"1"},attrs:{slot:"reference"},slot:"reference"},[t._v("操作")])]}},{key:"default",fn:function(e){return[0===e.row.is_reply?i("el-button",{staticClass:"newsBtn",attrs:{type:"primary",size:"mini"},on:{click:function(i){t.A_showAdd_1(e.row.index)}}},[t._v("\n          回复\n        ")]):1===e.row.is_reply?i("el-button",{staticClass:"newsBtn",attrs:{type:"primary",size:"mini"},on:{click:function(i){t.A_showAdd_2(e.row.index)}}},[t._v("\n          查看\n        ")]):t._e()]}}])})],1),t._v(" "),i("div",{staticClass:"paginationBox"},[i("el-pagination",{staticClass:"comPagination",attrs:{"page-size":t.pageObj[t.active].size,"page-sizes":[5,10,20,30],total:t.pageObj[t.active].count,"current-page":t.pageObj[t.active].page,layout:"prev, pager, next, total, jumper, sizes","prev-text":"上一页","next-text":"下一页","pager-count":5},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2)},staticRenderFns:[]};var S={components:{ComWhiteBox:f,ComTopTab:w},data:function(){return{loading:!1,tabs:{"大货项目":"0","开发项目":"0"},pageObj:{"大货项目":{count:0,size:3,page:1},"开发项目":{count:0,size:3,page:1}},listObj:{"大货项目":[],"开发项目":[]},search:{"大货项目":{conitemname:"",conitemdata:"",conmaterialname:""},"开发项目":{conitemname:"",conitemdata:"",conmaterialname:""}},active:"大货项目",tabType:{"大货项目":"dh","开发项目":"kf"},text:{unit_stage:{1:"报价阶段",2:"订料单耗",3:"确认单耗",4:"裁剪单耗",5:"实际单耗"}},nodeMapList:{"大货项目":[],"开发项目":[]}}},created:function(){var t=this.tabs;for(var e in t)this.A_getUnitConsumPtion(e)},methods:{A_showAdd_1:function(t){var e=window.location.origin+"/nova/",i=this.listObj,n=this.active,a=this.tabType,s=i[n][t],o=s.item_id,r=s.style_id,l=s.custom_id,c=a[n];updateWin({title:"款式物料清单",width:1700,height:700,url:e+"styleBomShowAction.do?action=showAdd&id="+o+"&pagetype=finally&item_type="+c+"&style_id="+r+"&showview=true&onleviewtype=true",param:{item_type:c,style_id:r,custom_id:l},onClose:function(){},fn:function(){}})},A_showAdd_2:function(t){var e=window.location.origin+"/nova/",i=this.listObj[this.active][t],n=i.style_id,a=i.item_id,s=i.item_name,o=i.style_name,r=i.material_name,l=encodeURI(r),c=o.replace(/&/g,"#*#*");ui("open",{title:"物料单耗变更记录",url:e+"pages/unitconsumptionaccount/unitConsumptionAccountlist.jsp?style_id="+n+"&item_id="+a+"&item_name="+s+"&style_name="+c+"&material_name="+l,param:{style_id:n,item_id:a,item_name:s,style_name:o,material_name:r},onClose:function(){}})},A_showAdd_3:function(t,e){var i=this,n=window.location.origin+"/nova/",a=i.listObj,s=i.active,o=i.tabType,r=a[s][t],l=r.item_id,c=r.style_id,d=r.style_bom_detail_id,_=r.style_bom_detail_key,u=o[s];v({name:"核算前验证",obj:{item_id:l,style_id:c,style_bom_detail_key:_},suc:function(t){t?updateWin({title:"技术单耗核算",url:n+"unitConsumptionAccountShowAction.ndo?action=showAdd"+e,width:1800,height:1e3,param:{item_id:l,style_bom_detail_id:d,style_bom_detail_key:_,item_type:u,style_id:c},onClose:function(){},fn:function(){i.A_getUnitConsumPtion(s,!0)}}):i.$message({message:"当前物料正在审核，请选择其他物料",type:"warning"})}})},A_getUnitConsumPtion:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading=e;var i=this,n=this.tabType,a=this.search,s=this.pageObj,o=a[t],r=o.conitemname,l=o.conitemdata,c=o.conmaterialname,d=parseInt(s[t].page)-1,_=s[t].size,u={item_type:n[t],userid:"",conitemname:r.trim(),conitemdata:l.trim(),conmaterialname:c.trim(),pageindex:d,pagesize:_,type:1};v({name:"技术单耗岗",obj:u,suc:function(n){e&&(i.loading=!1),i.tabs[t]=parseInt(n.count),i.pageObj[t].count=parseInt(n.count);var a=n.itemDataMapList,s=[];if(a){for(var o={},r=0;r<a.length;r++){var l=a[r],c=[l.group_name,l.item_season,l.type_name,l.series_name];o[l.style_id+"_info"]=c.join(" > "),o[l.style_id+"_name"]=l.item_name,o[l.style_id+"_style_id"]=l.style_id,o[l.style_id+"_style_name"]=l.style_name,o[l.style_id]=l}i.nodeMapList[t]=n.nodeMapList;for(var d=n.styleBomDetailMapList,_=0;_<d.length;_++){var u=d[_];u.index=_,u.item_name=o[u.style_id+"_name"],u.item_info=o[u.style_id+"_info"],u.style_id=o[u.style_id+"_style_id"],u.style_name=o[u.style_id+"_style_name"],u.custom_id=o[u.style_id].custom_id;for(var p=o[u.style_id].itemNodeMap,m=new Date,h=new Date(m.getFullYear(),m.getMonth(),m.getDate()).getTime(),v=0;v<p.length;v++){var g=p[v];if(1===g.is_complete)g.timeText="完成",g.timeColor="#67C23A";else if(2===g.is_complete)g.timeText="超期完成",g.timeColor="#E6A23C";else{var f=g.plan_enddate.split("-"),b=new Date(f[0],parseInt(f[1])-1,f[2]).getTime();parseInt((parseInt(b)-parseInt(h))/1e3/60/60/24)>0?(g.timeText="未完成",g.timeColor="#909399"):(g.timeText="超期未完成",g.timeColor="#F56C6C")}u[g.node_id]=g}s.push(u)}}i.listObj[t]=s}})},tableHeaderClick:function(t){var e=this;setTimeout(function(){e.$refs[t].focus()},100)},changeTab:function(t){this.active=t},clear:function(t){var e=this.active;this.search[e][t]=""},select:function(){var t=this.pageObj,e=this.active;t[e].page=1,this.A_getUnitConsumPtion(e,!0)},handleSizeChange:function(t){var e=this.pageObj,i=this.active;e[i].size=t,e[i].page=1,this.A_getUnitConsumPtion(i,!0)},handleCurrentChange:function(t){var e=this.pageObj,i=this.active;e[i].page=t,this.A_getUnitConsumPtion(i,!0)},f5:function(){var t=this.pageObj,e=this.listObj,i=this.search,n=this.nodeMapList,a=this.tabs;for(var s in t)t[s]={count:0,size:3,page:1};for(var o in e)e[o]=[];for(var r in i)i[r]={conitemname:"",conitemdata:"",conmaterialname:""};for(var l in n)n[l]=[];for(var c in this.pageObj=t,this.listObj=e,this.search=i,this.nodeMapList=n,this.active="大货项目",a)this.A_getUnitConsumPtion(c,!0)}}},O={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("com-white-box",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"跟进物料单耗--技术单耗岗",hidden:!0}},[i("template",{slot:"f5"},[i("i",{staticClass:"el-icon-refresh f5",on:{click:t.f5}})]),t._v(" "),i("com-top-tab",{attrs:{active:t.active,list:t.tabs},on:{changeTab:t.changeTab}}),t._v(" "),i("el-table",{staticClass:"el-table",attrs:{data:t.listObj[t.active],border:""}},[i("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("div",{staticClass:"thText",staticStyle:{flex:"1"},attrs:{slot:"reference"},slot:"reference"},[t._v("快速通道")])]}},{key:"default",fn:function(e){return[i("p",{staticClass:"itemBtn",on:{click:function(i){t.A_showAdd_1(e.row.index)}}},[t._v("查看物料清单")]),t._v(" "),i("p",{staticClass:"itemBtn",on:{click:function(i){t.A_showAdd_2(e.row.index)}}},[t._v("查看物料单耗变更记录")]),t._v(" "),i("p",[i("span",{staticClass:"itemBtn",on:{click:function(i){t.A_showAdd_3(e.row.index)}}},[t._v("核算单耗")]),t._v(" "),i("span",[t._v(" | ")]),t._v(" "),i("span",{staticClass:"itemBtn",on:{click:function(i){t.A_showAdd_3(e.row.index,"&dlhs=1")}}},[t._v("订料单耗核算")])])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"item_name",width:"100",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[i("el-input",{ref:"input_1",attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(e){t.clear("conitemname")},change:t.select},model:{value:t.search[t.active].conitemname,callback:function(e){t.$set(t.search[t.active],"conitemname",e)},expression:"search[active].conitemname"}}),t._v(" "),i("div",{staticClass:"thText",class:t.search[t.active].conitemname?"thActive":"",staticStyle:{flex:"1"},attrs:{slot:"reference"},on:{click:function(e){t.tableHeaderClick("input_1")}},slot:"reference"},[t._v("\n            项目名称"),i("span",[t._v(" "),i("i",{staticClass:"el-icon-search"})])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"material_name",width:"200",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[i("el-input",{ref:"input_2",attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(e){t.clear("conmaterialname")},change:t.select},model:{value:t.search[t.active].conmaterialname,callback:function(e){t.$set(t.search[t.active],"conmaterialname",e)},expression:"search[active].conmaterialname"}}),t._v(" "),i("div",{staticClass:"thText",class:t.search[t.active].conmaterialname?"thActive":"",staticStyle:{flex:"1"},attrs:{slot:"reference"},on:{click:function(e){t.tableHeaderClick("input_2")}},slot:"reference"},[t._v("\n            物料名称"),i("span",[t._v(" "),i("i",{staticClass:"el-icon-search"})])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"item_info",width:"200",align:"center",label:"项目信息"}}),t._v(" "),i("el-table-column",{attrs:{prop:"unit_consumption",label:"单耗",width:"60",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"单耗阶段",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(t.text.unit_stage[e.row.unit_stage]||"未核算"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"最近核定",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.account_num?i("p",[t._v("\n          "+t._s(e.row.account_num)+"\n          "),e.row.count_stage_num?i("span",[t._v("（"+t._s(e.row.count_stage_num)+"）")]):t._e()]):t._e(),t._v(" "),i("p",[t._v(t._s(e.row.account_time||"未核算"))])]}}])}),t._v(" "),t._l(t.nodeMapList[t.active],function(e,n){return i("el-table-column",{key:"column_"+n,attrs:{label:e.node_name,width:"160"},scopedSlots:t._u([{key:"default",fn:function(n){return[n.row[e.node_id]?i("div",{},[i("p",[t._v("计划日期："+t._s(n.row[e.node_id].plan_enddate||"--"))]),t._v(" "),i("p",[t._v("完成日期："+t._s(n.row[e.node_id].actual_enddate||"--"))]),t._v(" "),i("p",[t._v("完成状态："),i("span",{style:{color:n.row[e.node_id].timeColor}},[t._v(t._s(n.row[e.node_id].timeText))])])]):t._e()]}}])})})],2),t._v(" "),i("div",{staticClass:"paginationBox"},[i("el-pagination",{staticClass:"comPagination",attrs:{"page-size":t.pageObj[t.active].size,"page-sizes":[3,10,20,30],total:t.pageObj[t.active].count,"current-page":t.pageObj[t.active].page,layout:"prev, pager, next, total, jumper, sizes","prev-text":"上一页","next-text":"下一页"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2)},staticRenderFns:[]};var z={components:{ComWhiteBox:f,ComTopTab:w},data:function(){return{loading:!1,tabs:{"大货项目":"0","开发项目":"0"},pageObj:{"大货项目":{count:0,size:3,page:1},"开发项目":{count:0,size:3,page:1}},listObj:{"大货项目":[],"开发项目":[]},search:{"大货项目":{item_name:"",item_msg:""},"开发项目":{item_name:"",item_msg:""}},active:"大货项目",tabType:{"大货项目":"dh","开发项目":"kf"},text:{create_type:{1:"样品工艺",2:"大货工艺"}},nodeMapList:{"大货项目":[],"开发项目":[]}}},created:function(){var t=this.tabs;for(var e in t)this.A_getStyleCraftList(e)},methods:{A_showAdd_1:function(t){var e=window.location.origin+"/nova/",i=this.listObj[this.active][t],n=i.product_id,a=i.style_id,s=i.item_type,o=i.item_name,r=i.style_name,l=i.is_bom_edit;updateWin({title:"工艺清单",width:1700,height:900,url:e+"styleCraftShowAction.do?action=showAdd&id="+n,param:{style_id:a,item_type:s,item_name:o,style_name:r,is_bom_edit:l},onClose:function(){},fn:function(){}})},A_showAdd_2:function(t){var e=window.location.origin+"/nova/",i=this.listObj[this.active][t],n=i.product_id,a=i.style_id,s=i.item_type;ui("open",{title:"工艺变更记录",url:e+"/styleCraftShowAction.do?action=showChangeCraftList&id="+n+"&style_id="+a+"&item_type="+s,onClose:function(){}})},A_showAdd_3:function(t){var e=this,i=window.location.origin+"/nova/",n=e.listObj,a=e.active,s=n[a][t],o=s.product_id,r=s.style_id,l=s.item_type,c=s.item_name,d=s.style_name,_=s.custom_name;s.style_craft_id?updateWin({title:"工艺变更申请",width:1700,height:900,url:i+"styleCraftShowAction.do?action=showChangeCraft&id="+o,param:{style_id:r,item_type:l,item_name:c,style_name:d,custom_name:_},onClose:function(){},fn:function(){e.A_getStyleCraftList(a,!0)}}):updateWin({title:"工艺清单录入",width:1700,height:900,url:i+"styleCraftShowAction.do?action=showAdd&id="+o,param:{style_id:r,item_type:l,item_name:c,style_name:d,custom_name:_},onClose:function(){},fn:function(){e.A_getStyleCraftList(a,!0)}})},A_getStyleCraftList:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading=e;var i=this,n=this.tabType,a=this.search,s=this.pageObj,o=parseInt(s[t].page),r=s[t].size,l=a[t],c=l.item_name,d=l.item_msg,_={item_type:n[t],emp_id:"",item_name:c.trim(),item_msg:d.trim(),start:o,page:r,type:1};v({name:"技术工艺岗",obj:_,suc:function(n){e&&(i.loading=!1),i.tabs[t]=parseInt(n.count.num),i.pageObj[t].count=parseInt(n.count.num),i.nodeMapList[t]=n.itemNodeList;var a=n.data,s=n.itemNodeList,o=[];if(a)for(var r=0;r<a.length;r++){var l=a[r];l.index=r;var c=[l.group_name,l.item_season,l.type_name,l.series_name];l.product_id_info=c.join(" > "),l.product_id_name=l.item_name;for(var d=new Date,_=new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime(),u=0;u<s.length;u++){var p=s[u].node_id;if(l["is_complete_"+p])if("1"===l["is_complete_"+p])l["timeText_"+p]="完成",l["timeColor_"+p]="#67C23A";else if("2"===l["is_complete_"+p])l["timeText_"+p]="超期完成",l["timeColor_"+p]="#E6A23C";else{var m=l["plan_enddate_"+p].split("-"),h=new Date(m[0],parseInt(m[1])-1,m[2]).getTime();parseInt((parseInt(h)-parseInt(_))/1e3/60/60/24)>0?(l["timeText_"+p]="未完成",l["timeColor_"+p]="#909399"):(l["timeText_"+p]="超期未完成",l["timeColor_"+p]="#F56C6C")}}o.push(l)}i.listObj[t]=o}})},tableHeaderClick:function(t){var e=this;setTimeout(function(){e.$refs[t].focus()},100)},changeTab:function(t){this.active=t},clear:function(t){this.search[t]=""},select:function(){var t=this.pageObj,e=this.active;t[e].page=1,this.A_getStyleCraftList(e,!0)},handleSizeChange:function(t){var e=this.pageObj,i=this.active;e[i].size=t,e[i].page=1,this.A_getStyleCraftList(i,!0)},handleCurrentChange:function(t){var e=this.pageObj,i=this.active;e[i].page=t,this.A_getStyleCraftList(i,!0)},f5:function(){var t=this.pageObj,e=this.listObj,i=this.search,n=this.nodeMapList,a=this.tabs;for(var s in t)t[s]={count:0,size:3,page:1};for(var o in e)e[o]=[];for(var r in i)i[r]={item_name:"",item_msg:""};for(var l in n)n[l]=[];for(var c in this.pageObj=t,this.listObj=e,this.search=i,this.nodeMapList=n,this.active="大货项目",a)this.A_getStyleCraftList(c,!0)}}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("com-white-box",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"跟进项目技术工艺--技术工艺岗",hidden:!0}},[i("template",{slot:"f5"},[i("i",{staticClass:"el-icon-refresh f5",on:{click:t.f5}})]),t._v(" "),i("com-top-tab",{attrs:{active:t.active,list:t.tabs},on:{changeTab:t.changeTab}}),t._v(" "),i("el-table",{staticClass:"el-table",attrs:{data:t.listObj[t.active],border:""}},[i("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("div",{staticClass:"thText",staticStyle:{flex:"1"},attrs:{slot:"reference"},slot:"reference"},[t._v("快速通道")])]}},{key:"default",fn:function(e){return[i("p",{staticClass:"itemBtn",on:{click:function(i){t.A_showAdd_1(e.row.index)}}},[t._v("查看工艺单")]),t._v(" "),i("p",{staticClass:"itemBtn",on:{click:function(i){t.A_showAdd_2(e.row.index)}}},[t._v("查看工艺单变更记录")]),t._v(" "),i("p",{staticClass:"itemBtn",on:{click:function(i){t.A_showAdd_3(e.row.index)}}},[t._v("录入/变更工艺单")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"item_name",width:"100",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[i("el-input",{ref:"input_1",attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(e){t.clear("item_name")},change:t.select},model:{value:t.search[t.active].item_name,callback:function(e){t.$set(t.search[t.active],"item_name",e)},expression:"search[active].item_name"}}),t._v(" "),i("div",{staticClass:"thText",class:t.search[t.active].item_name?"thActive":"",staticStyle:{flex:"1"},attrs:{slot:"reference"},on:{click:function(e){t.tableHeaderClick("input_1")}},slot:"reference"},[t._v("\n            项目名称"),i("span",[t._v(" "),i("i",{staticClass:"el-icon-search"})])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"product_id_info",width:"200",align:"center",label:"项目信息"}}),t._v(" "),i("el-table-column",{attrs:{label:"工艺阶段",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(t.text.create_type[e.row.create_type]))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"版本数（最近更新）",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(e.row.bbs))]),t._v(" "),i("p",[t._v(t._s(e.row.max_create_time))])]}}])}),t._v(" "),t._l(t.nodeMapList[t.active],function(e,n){return i("el-table-column",{key:"column_"+n,attrs:{label:e.node_name,width:"160"},scopedSlots:t._u([{key:"default",fn:function(n){return[n.row["item_node_id_"+e.node_id]?i("div",{},[i("p",[t._v("计划日期："+t._s(n.row["plan_enddate_"+e.node_id]||"--"))]),t._v(" "),i("p",[t._v("完成日期："+t._s(n.row["actual_enddate_"+e.node_id]||"--"))]),t._v(" "),i("p",[t._v("完成状态："),i("span",{style:{color:n.row["timeColor_"+e.node_id]}},[t._v(t._s(n.row["timeText_"+e.node_id]))])])]):t._e()]}}])})})],2),t._v(" "),i("div",{staticClass:"paginationBox"},[i("el-pagination",{staticClass:"comPagination",attrs:{"page-size":t.pageObj[t.active].size,"page-sizes":[3,10,20,30],total:t.pageObj[t.active].count,"current-page":t.pageObj[t.active].page,layout:"prev, pager, next, total, jumper, sizes","prev-text":"上一页","next-text":"下一页"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2)},staticRenderFns:[]};var M={components:{ComWhiteBox:f,ComTopTab:w},data:function(){return{loading:!1,host:window.location.origin+"/nova/",tabs:{"大货项目":"0","开发项目":"0"},pageObj:{"大货项目":{count:0,size:3,page:1},"开发项目":{count:0,size:3,page:1}},listObj:{"大货项目":[],"开发项目":[]},search:{"大货项目":{item_name:"",item_msg:""},"开发项目":{item_name:"",item_msg:""}},active:"大货项目",tabType:{"大货项目":"dh","开发项目":"kf"},text:{make_status:{1:"起草中",2:"提交至样品中心",3:"部分物料送达",4:"物料交齐",5:"已安排工厂",6:"打样完成",7:"业务员确认领取",8:"业务确认不合格",9:"撤销申请",10:"取消打样",11:"部分打样完成"}},nodeMapList:{"大货项目":[],"开发项目":[]}}},created:function(){var t=this.tabs;for(var e in t)this.A_getSampleConfirmRecordList(e)},methods:{A_showAdd_1:function(t){var e=this.listObj[this.active][t],i=e.sample_confirm_id,n=void 0===i?"null":i,a=e.make_sample_id,s=e.item_id,o=window.location.origin+"/nova/";ui("open",{title:"款式打样信息",url:o+"pages/makesamplerecord/makesamplerecordlist.jsp?item_id="+s+"&type=dygj&sample_confirm_id="+n+"&make_sample_id="+a,onClose:function(){}})},A_showAdd_2:function(t){var e=this.listObj[this.active][t],i=e.sample_confirm_id,n=void 0===i?"null":i,a=e.make_sample_id,s=e.item_id,o=window.location.origin+"/nova/";ui("open",{title:"款式过款记录",url:o+"pages/makesamplerecord/makesamplerecordlist.jsp?item_id="+s+"&type=gkjl&sample_confirm_id="+n+"&make_sample_id="+a,onClose:function(){}})},A_getSampleConfirmRecordList:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading=e;var i=this,n=this.tabType,a=this.search,s=this.pageObj,o=parseInt(s[t].page),r=s[t].size,l=a[t],c=l.item_name,d=l.item_msg,_={item_type:n[t],emp_id:"",item_name:c.trim(),item_msg:d.trim(),start:o,page:r,type:1};v({name:"技术版型岗",obj:_,suc:function(n){e&&(i.loading=!1),i.tabs[t]=parseInt(n.count.num),i.pageObj[t].count=parseInt(n.count.num),i.nodeMapList[t]=n.itemNodeList;var a=n.data,s=n.itemNodeList,o=[];if(a)for(var r=0;r<a.length;r++){var l=a[r];l.index=o.length;var c=[l.group_name,l.item_season,l.type_name,l.series_name];l.product_id_info=c.join(" > "),l.product_id_name=l.item_name;for(var d=new Date,_=new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime(),u=0;u<s.length;u++){var p=s[u].node_id;if(l["is_complete_"+p])if(1===l["is_complete_"+p])l["timeText_"+p]="完成",l["timeColor_"+p]="#67C23A";else if(2===l["is_complete_"+p])l["timeText_"+p]="超期完成",l["timeColor_"+p]="#E6A23C";else{var m=l["plan_enddate_"+p].split("-"),h=new Date(m[0],parseInt(m[1])-1,m[2]).getTime();parseInt((parseInt(h)-parseInt(_))/1e3/60/60/24)>0?(l["timeText_"+p]="未完成",l["timeColor_"+p]="#909399"):(l["timeText_"+p]="超期未完成",l["timeColor_"+p]="#F56C6C")}}o.push(l)}i.listObj[t]=o}})},tableHeaderClick:function(t){var e=this;setTimeout(function(){e.$refs[t].focus()},100)},changeTab:function(t){this.active=t},clear:function(t){this.search[t]=""},select:function(){var t=this.pageObj,e=this.active;t[e].page=1,this.A_getSampleConfirmRecordList(e,!0)},handleSizeChange:function(t){var e=this.pageObj,i=this.active;e[i].size=t,e[i].page=1,this.A_getSampleConfirmRecordList(i,!0)},handleCurrentChange:function(t){var e=this.pageObj,i=this.active;e[i].page=t,this.A_getSampleConfirmRecordList(i,!0)},f5:function(){var t=this.pageObj,e=this.listObj,i=this.search,n=this.nodeMapList,a=this.tabs;for(var s in t)t[s]={count:0,size:3,page:1};for(var o in e)e[o]=[];for(var r in i)i[r]={item_name:"",item_msg:""};for(var l in n)n[l]=[];for(var c in this.pageObj=t,this.listObj=e,this.search=i,this.nodeMapList=n,this.active="大货项目",a)this.A_getSampleConfirmRecordList(c,!0)}}},I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("com-white-box",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"跟进样衣--技术版型岗",hidden:!0}},[i("template",{slot:"f5"},[i("i",{staticClass:"el-icon-refresh f5",on:{click:t.f5}})]),t._v(" "),i("com-top-tab",{attrs:{active:t.active,list:t.tabs},on:{changeTab:t.changeTab}}),t._v(" "),i("el-table",{staticClass:"el-table",attrs:{data:t.listObj[t.active],border:""}},[i("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("div",{staticClass:"thText",staticStyle:{flex:"1"},attrs:{slot:"reference"},slot:"reference"},[t._v("快速通道")])]}},{key:"default",fn:function(e){return[i("p",{staticClass:"itemBtn",on:{click:function(i){t.A_showAdd_1(e.row.index)}}},[t._v("查看款式打样信息")]),t._v(" "),i("p",{staticClass:"itemBtn",on:{click:function(i){t.A_showAdd_2(e.row.index)}}},[t._v("查看款式过款记录")])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"item_name",width:"100",align:"center"},scopedSlots:t._u([{key:"header",fn:function(e){return[i("el-popover",{attrs:{placement:"top",width:"250",trigger:"click"}},[i("el-input",{ref:"input_1",attrs:{clearable:"",placeholder:"多个查询空格分隔"},on:{clear:function(e){t.clear("item_name")},change:t.select},model:{value:t.search[t.active].item_name,callback:function(e){t.$set(t.search[t.active],"item_name",e)},expression:"search[active].item_name"}}),t._v(" "),i("div",{staticClass:"thText",class:t.search[t.active].item_name?"thActive":"",staticStyle:{flex:"1"},attrs:{slot:"reference"},on:{click:function(e){t.tableHeaderClick("input_1")}},slot:"reference"},[t._v("\n            项目名称"),i("span",[t._v(" "),i("i",{staticClass:"el-icon-search"})])])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"product_id_info",width:"200",align:"center",label:"项目信息"}}),t._v(" "),i("el-table-column",{attrs:{label:"样衣类型",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(e.row.sample_type_name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"样衣进展",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(t.text.make_status[e.row.make_status]))])]}}])}),t._v(" "),t._l(t.nodeMapList[t.active],function(e,n){return i("el-table-column",{key:"column_"+n,attrs:{label:e.node_name,width:"160"},scopedSlots:t._u([{key:"default",fn:function(n){return[n.row["item_node_id_"+e.node_id]?i("div",{},[i("p",[t._v("计划日期："+t._s(n.row["plan_enddate_"+e.node_id]||"--"))]),t._v(" "),i("p",[t._v("完成日期："+t._s(n.row["actual_enddate_"+e.node_id]||"--"))]),t._v(" "),i("p",[t._v("完成状态："),i("span",{style:{color:n.row["timeColor_"+e.node_id]}},[t._v(t._s(n.row["timeText_"+e.node_id]))])])]):t._e()]}}])})})],2),t._v(" "),i("div",{staticClass:"paginationBox"},[i("el-pagination",{staticClass:"comPagination",attrs:{"page-size":t.pageObj[t.active].size,"page-sizes":[3,10,20,30],total:t.pageObj[t.active].count,"current-page":t.pageObj[t.active].page,layout:"prev, pager, next, total, jumper, sizes","prev-text":"上一页","next-text":"下一页"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],2)},staticRenderFns:[]};var D={components:{ComWhiteBox:f},data:function(){return{loading:!1,status:!1,starttime:"",endtime:"",today:"",timeArr:[],list:{}}},created:function(){var t=new Date,e=t.getFullYear(),i=t.getMonth(),n=t.getDate(),a=new Date(e,i+1,1).getTime(),s=new Date(a-864e5).getDate(),o=1===String(i+1).length?"0"+(i+1):i+1,r=1===String(s).length?"0"+s:s;this.starttime=e+"-"+o+"-01",this.endtime=e+"-"+o+"-"+r,this.today=e+"-"+o+"-"+n,this.thisMonth()},methods:{thisMonth:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=t;var e=this,i=e.starttime,n=e.endtime;v({name:"日程列表",obj:{userid:"",starttime:i,endtime:n,type:1},suc:function(i){t&&(e.loading=!1);for(var n=[],a={},s=0;s<i.length;s++){var o=i[s];n.push(o.date),a[o.date]=o.data}e.timeArr=n,e.list=a,e.status=!0}})},chooseDay:function(t){var e=this.today;if(this.today=t,e.slice(0,-3)!==t.slice(0,-3)){var i=t.split("-"),n=i[0],a=parseInt(i[1])-1,s=new Date(n,a+1,1).getTime(),o=new Date(s-864e5).getDate(),r=1===String(a).length?"0"+(a+1):a+1,l=1===String(o).length?"0"+o:o;this.starttime=n+"-"+r+"-01",this.endtime=n+"-"+r+"-"+l,this.thisMonth(!0)}},arrIncludes:function(t,e){for(var i=!1,n=0;n<e.length;n++)e[n]===t&&(i=!0);return i},f5:function(){this.status=!1,this.timeArr=[],this.list={};var t=new Date,e=t.getFullYear(),i=t.getMonth(),n=t.getDate(),a=new Date(e,i+1,1).getTime(),s=new Date(a-864e5).getDate(),o=1===String(i+1).length?"0"+(i+1):i+1,r=1===String(s).length?"0"+s:s;this.starttime=e+"-"+o+"-01",this.endtime=e+"-"+o+"-"+r,this.today=e+"-"+o+"-"+n,this.thisMonth(!0)}},computed:{toggleMonth:function(){if(this.status){var t=this.today.split("-")[1],e=this.$children[0].$children[0].curMonthDatePrefix;return t!==e.split("-")[1]&&this.chooseDay(e+"-01"),""}return""}}},B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("com-white-box",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"日程记录"}},[i("template",{slot:"f5"},[i("i",{staticClass:"el-icon-refresh f5",on:{click:t.f5}})]),t._v(" "),i("div",{staticClass:"contentBox"},[i("span",{staticStyle:{display:"none"}},[t._v(t._s(t.toggleMonth))]),t._v(" "),i("div",{staticClass:"leftBox"},[i("el-calendar",{ref:"asd",staticClass:"comCalendar",attrs:{"first-day-of-week":7},scopedSlots:t._u([{key:"dateCell",fn:function(e){e.date;var n=e.data;return[i("div",{staticClass:"day",class:n.isSelected?"is-selected":"",on:{click:function(e){t.chooseDay(n.day)}}},[t._v("\n            "+t._s(n.day.split("-")[2])+"\n            "),t._v(" "),t.arrIncludes(n.day,t.timeArr)?i("span",{staticClass:"point"}):t._e()])]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.list[t.today]&&t.list[t.today].length,expression:"list[today] && list[today].length"}],staticClass:"rightBox"},[i("p",[t._v(t._s(t.today)+" 日程规划")]),t._v(" "),i("ul",{staticClass:"listUl"},t._l(t.list[t.today],function(e,n){return i("li",{key:"list_"+n,staticClass:"listLi"},[i("p",[t._v(t._s(e.time))]),t._v(" "),i("p",[t._v(t._s(e.title))]),t._v(" "),i("p",[t._v(t._s(e.content))])])})),t._v(" "),i("div",{staticClass:"triangle"})])])],2)},staticRenderFns:[]};var N={components:{ComWhiteBox:f},data:function(){return{loading:!1,list:[]}},created:function(){this.A_needToBeDealtWithNode()},methods:{A_showAdd_1:function(){var t=window.location.origin+"/nova/";ui("open",{title:"待办中心",url:t+"pages/itemnode/itemNodeNeedMenulist.jsp",onClose:function(){}})},goTo:function(t){var e={kf:"开发待办业务列表",ml:"面料待办业务列表",dh:"大货待办业务列表"},i=window.location.origin+"/nova/";console.log("单条待办 ----- ",i+"pages/itemnode/itemNodeNeedMenulist.jsp?type="+t),console.log("单条待办 ----- ",e[t]),ui("open",{title:e[t],url:i+"pages/itemnode/itemNodeNeedMenulist.jsp?type="+t,onClose:function(){}})},A_needToBeDealtWithNode:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=t;var e=this;v({name:"待办已办业务列表",obj:{employeeid:"",iscomplete:0,condition:[],pageindex:0,pagesize:10,isweek:1,type:1},suc:function(i){t&&(e.loading=!1);for(var n=[],a=0;a<i.length;a++){var s={},o=i[a]||{},r=o.itemInfo,l=void 0===r?{}:r,c=l.needsize,d=l.item_name,_=l.item_type;s.num=c,s.name=d,s.item_type=_;for(var u=[],p=0;p<o.itemNode.length;p++){var m=o.itemNode[p],h=m.actual_enddate,v=m.plan_enddate;if(h){var g=h.split("-"),f=new Date(g[0],parseInt(g[1])-1,g[2]).getTime(),b=v.split("-"),w=new Date(b[0],parseInt(b[1])-1,b[2]).getTime(),C=parseInt((f-w)/1e3/60/60/24);if(C>0){var y=m.node_name+"（超期"+C+"天完成）";u.push('<span style="color: #67C23A;">'+y+"</span>")}else if(C<0){var x=m.node_name+"（提前"+C+"天完成）";u.push('<span style="color: #67C23A;">'+x+"</span>")}else{var A=""+m.node_name;u.push('<span style="color: #67C23A;">'+A+"</span>")}}else{var k=new Date,j=new Date(k.getFullYear(),k.getMonth(),k.getDate()),T=j.getTime()-1e3*j.getDay()*60*60*24,S=v.split("-"),O=new Date(S[0],parseInt(S[1])-1,S[2]).getTime(),z=parseInt((O-T)/1e3/60/60/24);if(z<0){var L=m.node_name+"（超时"+-1*z+"天）";u.push('<span style="color: #F56C6C;">'+L+"</span>")}else{var M=""+m.node_name;u.push("<span>"+M+"</span>")}}}s.str="<p>"+u.join(" > ")+"</p>",n.push(s)}e.list=n}})},f5:function(){this.list=[],this.A_needToBeDealtWithNode(!0)}}},F={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("com-white-box",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:"本周待办"}},[i("template",{slot:"f5"},[i("i",{staticClass:"el-icon-refresh f5",on:{click:t.f5}})]),t._v(" "),i("template",{slot:"title"},[i("span",{staticStyle:{cursor:"pointer","font-size":"12px"},on:{click:t.A_showAdd_1}},[t._v("\n      前往待办中心"),i("i",{staticClass:"el-icon-right"})])]),t._v(" "),i("div",{staticClass:"contentBox"},t._l(t.list,function(e,n){return i("div",{key:"list_"+n,staticClass:"li"},[i("div",{staticClass:"liNum",staticStyle:{cursor:"pointer"},on:{click:function(i){t.goTo(e.item_type)}}},[i("span",[t._v(t._s(e.num))]),t._v(" "),i("span",{staticClass:"liNumText"},[t._v("待办")])]),t._v(" "),i("div",{staticClass:"liText"},[i("span",{staticClass:"liName"},[t._v(t._s(e.name))]),t._v(" "),i("p",{staticClass:"liTextCenter",domProps:{innerHTML:t._s(e.str)}})])])}))],2)},staticRenderFns:[]};var H={components:{ComTask:x,ComNews:i("VU/8")(j,T,!1,function(t){i("7m88"),i("ny1p")},"data-v-618cd5d8",null).exports,ComDanhao:i("VU/8")(S,O,!1,function(t){i("/LZa")},"data-v-147545d1",null).exports,ComGongyi:i("VU/8")(z,L,!1,function(t){i("NHJM")},"data-v-61ebe776",null).exports,ComBanxing:i("VU/8")(M,I,!1,function(t){i("hhOe")},"data-v-1ece7d97",null).exports,ComDay:i("VU/8")(D,B,!1,function(t){i("nlmy"),i("eFIn")},"data-v-0ac5ebfc",null).exports,ComWeek:i("VU/8")(N,F,!1,function(t){i("4OFl")},"data-v-6bc24567",null).exports},data:function(){return{scrollTop:0,powerArr:[]}},created:function(){var t=this;v({name:"权限",obj:{},suc:function(e){var i=e.resourceCode;t.powerArr=i},method:"post"})},methods:{pageScroll:function(t){var e=t.target.scrollTop,i=this.scrollTop;Math.abs(e-i)<300?(this.scrollTop=t.target.scrollTop,this.$refs.page.scrollTop=e):this.$refs.page.scrollTop=i},arrIncludes:function(t,e){for(var i=!1,n=0;n<e.length;n++)e[n]===t&&(i=!0);return i}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"page",staticClass:"pageBox",on:{scroll:t.pageScroll}},[i("div",{staticClass:"pageLine"},[i("com-task",{staticClass:"task"}),t._v(" "),i("com-news",{staticClass:"news"})],1),t._v(" "),t.arrIncludes("GZTJSDH",t.powerArr)?i("div",{staticClass:"pageLine"},[i("com-danhao")],1):t._e(),t._v(" "),t.arrIncludes("GZTJSGY",t.powerArr)?i("div",{staticClass:"pageLine"},[i("com-gongyi")],1):t._e(),t._v(" "),t.arrIncludes("GZTJSBX",t.powerArr)?i("div",{staticClass:"pageLine"},[i("com-banxing")],1):t._e(),t._v(" "),i("div",{staticClass:"pageLine"},[i("com-day",{staticClass:"richeng"}),t._v(" "),i("com-week",{staticClass:"benzhou"})],1)])},staticRenderFns:[]};var R=i("VU/8")(H,$,!1,function(t){i("Zx+g"),i("SQix")},"data-v-41a0ea23",null).exports;n.default.use(o.a);var U=new o.a({routes:[{path:"/center",component:R,name:"信息中心"},{path:"/",component:R,name:""}]}),W=i("NYxO");n.default.use(W.a);var E=new W.a.Store({modules:{},state:{},mutations:{}}),P=(i("tvR6"),i("hKoQ"));i.n(P).a.polyfill(),n.default.use(u.a),new n.default({el:"#app",store:E,router:U,components:{App:s},template:"<App/>"})},SQix:function(t,e){},X99F:function(t,e){},"Zx+g":function(t,e){},eFIn:function(t,e){},hhOe:function(t,e){},nlmy:function(t,e){},ny1p:function(t,e){},tvR6:function(t,e){},uTUo:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.919161dc46b38667306d.js.map